# 内网穿透



​	在针对内网的渗透攻击中，由于内网环境相对封闭，且通常部署有出口网关或访问控制设备（如网络应用防火墙WAF和传统防火墙FW）等，攻击者即便成功进入内网，也可能因为端口的封闭和严格的访问控制，难以留下后门程序。然而，内网穿透技术的发展为攻击者提供了突破这些防御措施的手段。攻击者通过利用内网穿透技术，可以绕过防火墙或内网的限制，与外界建立TCP连接，不仅如此，通过利用一些特殊的协议（如VPN、SSH隧道等），还能实现数据的加密通信，或者利用反向代理，实现真实IP隐藏，从而增加了追踪和检测的难度。下面详细介绍以下常用的内网穿透技术。

​	**内网穿透技术主要用于绕过网络隔离或访问控制，实现从外部网络对内网资源的访问。这些技术可以分为几个主要类别：**

## 一、隧道技术

​	隧道技术是通过建立隧道协议（如SSH隧道、VPN、SSL/TLS隧道等）在内外网络之间创建一个加密的数据通道，这种方法可以有效地绕过网络访问控制，实现数据的隐秘传输。

​	一个非常经典的例子就是所谓的 “ 翻墙 ” 。“ 翻墙 ”的过程其实可以理解为一次大型的内网穿透，只不过这里的内网变成了中国互联网。而出口网关则是“GFW”（长城防火墙）。经过几十年的发展，GFW几乎成为了世界上最复杂、最广泛的互联网审查制度之一，但即便如此，还是有很多人通过一些内网穿透的手段成功绕过了GFW的限制，访问到了被屏蔽的国际互联网资源。这个过程中为了绕过GFW的监管，一般会采用数据加密，协议封装，以及代理服务器等多个技术，这也几乎是隧道技术的关键要素。

**隧道技术的关键要素：**

隧道技术涉及几个关键要素，使其能够有效地用于数据加密和隐蔽传输：

1. **加密**：隧道技术的核心在于其能够加密数据，确保数据在传输过程中的安全性和隐私。无论是SSH、VPN还是SSL/TLS隧道，它们都提供了强大的加密机制，使得数据即便被截获，也无法被第三方读取。
2. **协议封装**：隧道技术通常涉及将原始数据包装在另一个协议中，如在HTTP流量中封装VPN数据。这种封装方法使得隧道内的流量可以穿越网络防火墙和内容过滤系统，因为它们看起来像是正常的、被允许的流量。
3. **服务器中继**：大多数隧道技术都依赖于一个或多个中继服务器，这些服务器位于世界各地，帮助用户的数据绕过地理限制和审查。用户的数据首先被发送到这些中继服务器，然后才从服务器转发到最终目的地。

下面首先讲一下SSH隧道技术：

### 1、SSH隧道：

​	

